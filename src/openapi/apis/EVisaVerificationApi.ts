/* tslint:disable */
/* eslint-disable */
/**
 * Vouchsafe API docs
 * Vouchsafe offers a REST API to conduct operations programmatically.  You can request and manage verifications, as well as perform smart lookups.  To use the API, you need a client ID and secret from the Vouchsafe dashboard. [Sign up here](https://app.vouchsafe.id/) if you haven\'t already.  We also have a [video guide](https://www.youtube.com/playlist?list=PLx6V6SSTMuF_ZNWBPnysvwmdIwboLViE8) showing the basics, as well as [SDKs and libraries](https://help.vouchsafe.id/en/articles/12026847-vouchsafe-sdks-and-libraries) for popular languages.
 *
 * The version of the OpenAPI document: 0.1.0
 * Contact: help@vouchsafe.id
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  ApiErrorResponse,
  EvisaVerificationInput,
  EvisaVerificationResponse,
} from '../models/index';
import {
    ApiErrorResponseFromJSON,
    ApiErrorResponseToJSON,
    EvisaVerificationInputFromJSON,
    EvisaVerificationInputToJSON,
    EvisaVerificationResponseFromJSON,
    EvisaVerificationResponseToJSON,
} from '../models/index';

export interface VerifyEvisaRequest {
    evisaVerificationInput: EvisaVerificationInput;
}

/**
 * 
 */
export class EVisaVerificationApi extends runtime.BaseAPI {

    /**
     * <div style=\"background-color: #ffebee; border-left: 4px solid #c62828; padding: 12px 16px; margin: 10px 0;\"> <strong style=\"color: #c62828;\">Experimental (beta):</strong> This feature is new and currently in beta. </div>  Verify a person\'s UK eVisa using their Home Office share code.  This endpoint allows you to verify a person\'s `immigration status`, `right to work`, or `right to rent` eVisa by providing their share code and date of birth. The share code is obtained by the individual from the UK Home Office online service.  **Supported verification types:** - `ImmigrationStatus` - Check a person\'s immigration status (e.g., Settled, Skilled Worker, Youth Mobility Scheme) - `RightToWork` - Check a person\'s right to work in the UK - `RightToRent` - Check a person\'s right to rent property in the UK  **Response fields by sub-type:** The response fields directly reflect the information available on a particular eVisa sub-type. On a `pass` outcome, all fields for the sub-type will be populated. On a `fail` outcome, `extracted_details` may be partially populated or empty depending on which validation step failed.  **Billing:** Every successful API call (`HTTP 200`) is a billable event, regardless of whether the verification outcome is `pass` or `fail`. Error responses (`HTTP 422`, `HTTP 503`) are not billable and return a different response body. Note that the `billable` field in the response is deprecated and will always be `true` on a `HTTP 200` response.  **Artefacts:** On a successful response, artefacts are returned inline with pre-signed download URLs. You have **30 minutes** to download them before the URLs expire.  > **Request behaviour:** This is a synchronous endpoint. It can take up to 20 seconds.  **Retry guidance:** It is safe to retry requests as the endpoint is stateless and does not create persistent records. We recommend an exponential backoff strategy (e.g. 2s, 4s, 8s) with a maximum of 2–3 retries for transient failures (`HTTP 503`). Do **not** retry `HTTP 422` responses as these indicate the share code has been locked out by GOV.UK and the user needs to generate a new one.  **Sandbox testing:** Use these share codes in sandbox mode to test different outcomes: - `PASS12345` - Returns a successful verification with \"Pass\" outcome - `FAIL12345` - Returns a failed verification (e.g. expired status) - `ERROR1234` - Returns an error response  > This endpoint supports sandbox mode. [See how sandbox mode works](https://help.vouchsafe.id/en/articles/11979598-how-does-sandbox-mode-work).
     */
    async verifyEvisaRaw(requestParameters: VerifyEvisaRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<EvisaVerificationResponse>> {
        if (requestParameters['evisaVerificationInput'] == null) {
            throw new runtime.RequiredError(
                'evisaVerificationInput',
                'Required parameter "evisaVerificationInput" was null or undefined when calling verifyEvisa().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("bearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/verify/evisa`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: EvisaVerificationInputToJSON(requestParameters['evisaVerificationInput']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => EvisaVerificationResponseFromJSON(jsonValue));
    }

    /**
     * <div style=\"background-color: #ffebee; border-left: 4px solid #c62828; padding: 12px 16px; margin: 10px 0;\"> <strong style=\"color: #c62828;\">Experimental (beta):</strong> This feature is new and currently in beta. </div>  Verify a person\'s UK eVisa using their Home Office share code.  This endpoint allows you to verify a person\'s `immigration status`, `right to work`, or `right to rent` eVisa by providing their share code and date of birth. The share code is obtained by the individual from the UK Home Office online service.  **Supported verification types:** - `ImmigrationStatus` - Check a person\'s immigration status (e.g., Settled, Skilled Worker, Youth Mobility Scheme) - `RightToWork` - Check a person\'s right to work in the UK - `RightToRent` - Check a person\'s right to rent property in the UK  **Response fields by sub-type:** The response fields directly reflect the information available on a particular eVisa sub-type. On a `pass` outcome, all fields for the sub-type will be populated. On a `fail` outcome, `extracted_details` may be partially populated or empty depending on which validation step failed.  **Billing:** Every successful API call (`HTTP 200`) is a billable event, regardless of whether the verification outcome is `pass` or `fail`. Error responses (`HTTP 422`, `HTTP 503`) are not billable and return a different response body. Note that the `billable` field in the response is deprecated and will always be `true` on a `HTTP 200` response.  **Artefacts:** On a successful response, artefacts are returned inline with pre-signed download URLs. You have **30 minutes** to download them before the URLs expire.  > **Request behaviour:** This is a synchronous endpoint. It can take up to 20 seconds.  **Retry guidance:** It is safe to retry requests as the endpoint is stateless and does not create persistent records. We recommend an exponential backoff strategy (e.g. 2s, 4s, 8s) with a maximum of 2–3 retries for transient failures (`HTTP 503`). Do **not** retry `HTTP 422` responses as these indicate the share code has been locked out by GOV.UK and the user needs to generate a new one.  **Sandbox testing:** Use these share codes in sandbox mode to test different outcomes: - `PASS12345` - Returns a successful verification with \"Pass\" outcome - `FAIL12345` - Returns a failed verification (e.g. expired status) - `ERROR1234` - Returns an error response  > This endpoint supports sandbox mode. [See how sandbox mode works](https://help.vouchsafe.id/en/articles/11979598-how-does-sandbox-mode-work).
     */
    async verifyEvisa(requestParameters: VerifyEvisaRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<EvisaVerificationResponse> {
        const response = await this.verifyEvisaRaw(requestParameters, initOverrides);
        return await response.value();
    }

}
