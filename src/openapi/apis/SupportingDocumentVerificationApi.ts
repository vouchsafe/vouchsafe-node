/* tslint:disable */
/* eslint-disable */
/**
 * Vouchsafe API docs
 * Vouchsafe offers a REST API to conduct operations programmatically.  You can request and manage verifications, as well as perform smart lookups.  To use the API, you need a client ID and secret from the Vouchsafe dashboard. [Sign up here](https://app.vouchsafe.id/) if you haven\'t already.  We also have a [video guide](https://www.youtube.com/playlist?list=PLx6V6SSTMuF_ZNWBPnysvwmdIwboLViE8) showing the basics, as well as [SDKs and libraries](https://help.vouchsafe.id/en/articles/12026847-vouchsafe-sdks-and-libraries) for popular languages.
 *
 * The version of the OpenAPI document: 0.1.0
 * Contact: help@vouchsafe.id
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  ApiErrorResponse,
  SupportingDocumentVerificationResponse,
} from '../models/index';
import {
    ApiErrorResponseFromJSON,
    ApiErrorResponseToJSON,
    SupportingDocumentVerificationResponseFromJSON,
    SupportingDocumentVerificationResponseToJSON,
} from '../models/index';

export interface VerifySupportingDocumentRequest {
    document: Blob;
    subType: string;
    minimumDocumentLength?: string;
}

/**
 * 
 */
export class SupportingDocumentVerificationApi extends runtime.BaseAPI {

    /**
     * <div style=\"background-color: #ffebee; border-left: 4px solid #c62828; padding: 12px 16px; margin: 10px 0;\"> <strong style=\"color: #c62828;\">Experimental (beta):</strong> This feature is new and currently in beta. </div>  Extract and validate a supporting document.  This endpoint accepts a document file (PDF, JPG, or PNG) and extracts personal identity information and address details.  **Request format:** This endpoint accepts `multipart/form-data` with: - `document` - The document file (PDF, JPG, or PNG, max 10MB) - `sub_type` (required) - The type of document (e.g., `BankStatement`, `UtilityBill`). See \"Supported document types\" below. - `minimum_document_length` (optional) - Minimum document age in months. Documents older than this will fail the `document_age_valid` check.  **Supported document types (`sub_type`):** - `Payslip` - Employment payslips - `PensionAnnualStatement` - Pension statements - `BenefitsLetter` - Government benefits letters - `HMPPSLetter` - Probation service letters - `NHSLetter` - NHS correspondence - `BankStatement` - Bank account statements - `CreditCardStatement` - Credit card statements - `MortgageStatement` - Mortgage statements - `UtilityBill` - Gas, electricity, water bills - `MobilePhoneBill` - Mobile phone bills  **Validations performed:** - `required_fields_extracted` - Key identity fields were successfully extracted. These are: `first_name`, `last_name`, `first_line_of_address` and `postcode` - `category_match` - Document matches the specified sub_type - `document_age_valid` - Document is within acceptable age range (only if `minimum_document_length` provided) - `document_complete_and_legible` - Document is complete and readable - `tampering_signals_check` - No signs of document tampering detected  Sandbox testing: In sandbox mode, the endpoint returns a mock \"pass\" response with sandbox values. No actual document processing occurs.  > **Request behaviour:** This is a synchronous endpoint. Processing typically takes 5-15 seconds > depending on document complexity.  > This endpoint supports sandbox mode. [See how sandbox mode works](https://help.vouchsafe.id/en/articles/11979598-how-does-sandbox-mode-work).
     */
    async verifySupportingDocumentRaw(requestParameters: VerifySupportingDocumentRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<SupportingDocumentVerificationResponse>> {
        if (requestParameters['document'] == null) {
            throw new runtime.RequiredError(
                'document',
                'Required parameter "document" was null or undefined when calling verifySupportingDocument().'
            );
        }

        if (requestParameters['subType'] == null) {
            throw new runtime.RequiredError(
                'subType',
                'Required parameter "subType" was null or undefined when calling verifySupportingDocument().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("bearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }
        const consumes: runtime.Consume[] = [
            { contentType: 'multipart/form-data' },
        ];
        // @ts-ignore: canConsumeForm may be unused
        const canConsumeForm = runtime.canConsumeForm(consumes);

        let formParams: { append(param: string, value: any): any };
        let useForm = false;
        // use FormData to transmit files using content-type "multipart/form-data"
        useForm = canConsumeForm;
        if (useForm) {
            formParams = new FormData();
        } else {
            formParams = new URLSearchParams();
        }

        if (requestParameters['document'] != null) {
            formParams.append('document', requestParameters['document'] as any);
        }

        if (requestParameters['subType'] != null) {
            formParams.append('sub_type', requestParameters['subType'] as any);
        }

        if (requestParameters['minimumDocumentLength'] != null) {
            formParams.append('minimum_document_length', requestParameters['minimumDocumentLength'] as any);
        }


        let urlPath = `/verify/supporting-documents`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: formParams,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => SupportingDocumentVerificationResponseFromJSON(jsonValue));
    }

    /**
     * <div style=\"background-color: #ffebee; border-left: 4px solid #c62828; padding: 12px 16px; margin: 10px 0;\"> <strong style=\"color: #c62828;\">Experimental (beta):</strong> This feature is new and currently in beta. </div>  Extract and validate a supporting document.  This endpoint accepts a document file (PDF, JPG, or PNG) and extracts personal identity information and address details.  **Request format:** This endpoint accepts `multipart/form-data` with: - `document` - The document file (PDF, JPG, or PNG, max 10MB) - `sub_type` (required) - The type of document (e.g., `BankStatement`, `UtilityBill`). See \"Supported document types\" below. - `minimum_document_length` (optional) - Minimum document age in months. Documents older than this will fail the `document_age_valid` check.  **Supported document types (`sub_type`):** - `Payslip` - Employment payslips - `PensionAnnualStatement` - Pension statements - `BenefitsLetter` - Government benefits letters - `HMPPSLetter` - Probation service letters - `NHSLetter` - NHS correspondence - `BankStatement` - Bank account statements - `CreditCardStatement` - Credit card statements - `MortgageStatement` - Mortgage statements - `UtilityBill` - Gas, electricity, water bills - `MobilePhoneBill` - Mobile phone bills  **Validations performed:** - `required_fields_extracted` - Key identity fields were successfully extracted. These are: `first_name`, `last_name`, `first_line_of_address` and `postcode` - `category_match` - Document matches the specified sub_type - `document_age_valid` - Document is within acceptable age range (only if `minimum_document_length` provided) - `document_complete_and_legible` - Document is complete and readable - `tampering_signals_check` - No signs of document tampering detected  Sandbox testing: In sandbox mode, the endpoint returns a mock \"pass\" response with sandbox values. No actual document processing occurs.  > **Request behaviour:** This is a synchronous endpoint. Processing typically takes 5-15 seconds > depending on document complexity.  > This endpoint supports sandbox mode. [See how sandbox mode works](https://help.vouchsafe.id/en/articles/11979598-how-does-sandbox-mode-work).
     */
    async verifySupportingDocument(requestParameters: VerifySupportingDocumentRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<SupportingDocumentVerificationResponse> {
        const response = await this.verifySupportingDocumentRaw(requestParameters, initOverrides);
        return await response.value();
    }

}
