/* tslint:disable */
/* eslint-disable */
/**
 * Vouchsafe API docs
 * Vouchsafe offers a REST API to conduct operations programmatically.  You can request and manage verifications, as well as perform smart lookups.  To use the API, you need a client ID and secret from the Vouchsafe dashboard. [Sign up here](https://app.vouchsafe.id/) if you haven\'t already.  We also have a [video guide](https://www.youtube.com/playlist?list=PLx6V6SSTMuF_ZNWBPnysvwmdIwboLViE8) showing the basics, as well as [SDKs and libraries](https://help.vouchsafe.id/en/articles/12026847-vouchsafe-sdks-and-libraries) for popular languages.
 *
 * The version of the OpenAPI document: 0.1.0
 * Contact: help@vouchsafe.id
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  ApiErrorResponse,
  EvisaVerificationInput,
  EvisaVerificationResponse,
  SupportingDocumentVerificationResponse,
} from '../models/index';
import {
    ApiErrorResponseFromJSON,
    ApiErrorResponseToJSON,
    EvisaVerificationInputFromJSON,
    EvisaVerificationInputToJSON,
    EvisaVerificationResponseFromJSON,
    EvisaVerificationResponseToJSON,
    SupportingDocumentVerificationResponseFromJSON,
    SupportingDocumentVerificationResponseToJSON,
} from '../models/index';

export interface VerifyEvisaRequest {
    evisaVerificationInput: EvisaVerificationInput;
}

export interface VerifySupportingDocumentRequest {
    document: Blob;
    subType: string;
    minimumDocumentLength?: string;
}

/**
 * 
 */
export class VerifyApi extends runtime.BaseAPI {

    /**
     * <div style=\"background-color: #ffebee; border-left: 4px solid #c62828; padding: 12px 16px; margin: 10px 0;\"> <strong style=\"color: #c62828;\">Experimental (beta):</strong> This feature is new and currently in beta. </div>  Verify a person\'s UK eVisa using their Home Office share code.  This endpoint allows you to verify a person\'s `immigration status`, `right to work`, or `right to rent` eVisa by providing their share code and date of birth. The share code is obtained by the individual from the UK Home Office online service.  **Supported verification types:** - `ImmigrationStatus` - Check a person\'s immigration status (e.g., Settled, Skilled Worker, Youth Mobility Scheme) - `RightToWork` - Check a person\'s right to work in the UK - `RightToRent` - Check a person\'s right to rent property in the UK  > **Request behaviour:** This is a synchronous endpoint. It can take up to 20 seconds.  **Response fields by sub-type:** The response fields directly reflect the information available on a particular eVisa sub-type. On a `pass` outcome, all fields for the sub-type will be populated. On a `fail` outcome, `extracted_details` may be partially populated or empty depending on which validation step failed.  **Response summary:** | HTTP Status | Meaning | Action | |-------------|---------|--------| | `200` | Verification completed | Check the `outcome` field to determine if the verification was successful | | `422` | Share code locked out by GOV.UK | Retry with a new share code | | `503` | Service temporarily unavailable | Retry with exponential backoff |  **Billing:** An API call is billable when the eVisa was found on GOV.UK, regardless of whether the verification outcome is `pass` or `fail`. If the `share_code` or `date_of_birth` is invalid and no eVisa can be retrieved, the response will have `billable: false` and you will not be charged. Error responses (`HTTP 422`, `HTTP 503`) are also not billable and return an Error response body.  **Artefacts:** On a successful response, artefacts are returned inline with pre-signed download URLs. You have **30 minutes** to download them before the URLs expire.   **Sandbox testing:** Use these share codes in sandbox mode to test different outcomes: - `PASS12345` - Returns a successful verification with \"Pass\" outcome - `FAIL12345` - Returns a failed verification (e.g. expired status) - `ERROR1234` - Returns an error response - `BADCODE12` - Returns a non-billable failed verification (e.g. invalid share code) - `WRONGDOB1` - Returns a non-billable failed verification (e.g. wrong date of birth)  > This endpoint supports sandbox mode. [See how sandbox mode works](https://help.vouchsafe.id/en/articles/11979598-how-does-sandbox-mode-work).
     */
    async verifyEvisaRaw(requestParameters: VerifyEvisaRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<EvisaVerificationResponse>> {
        if (requestParameters['evisaVerificationInput'] == null) {
            throw new runtime.RequiredError(
                'evisaVerificationInput',
                'Required parameter "evisaVerificationInput" was null or undefined when calling verifyEvisa().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("bearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/verify/evisa`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: EvisaVerificationInputToJSON(requestParameters['evisaVerificationInput']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => EvisaVerificationResponseFromJSON(jsonValue));
    }

    /**
     * <div style=\"background-color: #ffebee; border-left: 4px solid #c62828; padding: 12px 16px; margin: 10px 0;\"> <strong style=\"color: #c62828;\">Experimental (beta):</strong> This feature is new and currently in beta. </div>  Verify a person\'s UK eVisa using their Home Office share code.  This endpoint allows you to verify a person\'s `immigration status`, `right to work`, or `right to rent` eVisa by providing their share code and date of birth. The share code is obtained by the individual from the UK Home Office online service.  **Supported verification types:** - `ImmigrationStatus` - Check a person\'s immigration status (e.g., Settled, Skilled Worker, Youth Mobility Scheme) - `RightToWork` - Check a person\'s right to work in the UK - `RightToRent` - Check a person\'s right to rent property in the UK  > **Request behaviour:** This is a synchronous endpoint. It can take up to 20 seconds.  **Response fields by sub-type:** The response fields directly reflect the information available on a particular eVisa sub-type. On a `pass` outcome, all fields for the sub-type will be populated. On a `fail` outcome, `extracted_details` may be partially populated or empty depending on which validation step failed.  **Response summary:** | HTTP Status | Meaning | Action | |-------------|---------|--------| | `200` | Verification completed | Check the `outcome` field to determine if the verification was successful | | `422` | Share code locked out by GOV.UK | Retry with a new share code | | `503` | Service temporarily unavailable | Retry with exponential backoff |  **Billing:** An API call is billable when the eVisa was found on GOV.UK, regardless of whether the verification outcome is `pass` or `fail`. If the `share_code` or `date_of_birth` is invalid and no eVisa can be retrieved, the response will have `billable: false` and you will not be charged. Error responses (`HTTP 422`, `HTTP 503`) are also not billable and return an Error response body.  **Artefacts:** On a successful response, artefacts are returned inline with pre-signed download URLs. You have **30 minutes** to download them before the URLs expire.   **Sandbox testing:** Use these share codes in sandbox mode to test different outcomes: - `PASS12345` - Returns a successful verification with \"Pass\" outcome - `FAIL12345` - Returns a failed verification (e.g. expired status) - `ERROR1234` - Returns an error response - `BADCODE12` - Returns a non-billable failed verification (e.g. invalid share code) - `WRONGDOB1` - Returns a non-billable failed verification (e.g. wrong date of birth)  > This endpoint supports sandbox mode. [See how sandbox mode works](https://help.vouchsafe.id/en/articles/11979598-how-does-sandbox-mode-work).
     */
    async verifyEvisa(requestParameters: VerifyEvisaRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<EvisaVerificationResponse> {
        const response = await this.verifyEvisaRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * <div style=\"background-color: #ffebee; border-left: 4px solid #c62828; padding: 12px 16px; margin: 10px 0;\"> <strong style=\"color: #c62828;\">Experimental (beta):</strong> This feature is new and currently in beta. </div>  Extract and validate a supporting document.  This endpoint accepts a document file (PDF, JPG, or PNG) and extracts personal identity information and address details.  **Request format:** This endpoint accepts `multipart/form-data` with: - `document` - The document file (PDF, JPG, or PNG, max 10MB) - `sub_type` (required) - The type of document (e.g., `BankStatement`, `UtilityBill`). See \"Supported document types\" below. - `minimum_document_length` (optional) - Minimum document age in months. Documents older than this will fail the `document_age_valid` check.  **Supported document types (`sub_type`):** - `Payslip` - Employment payslips - `PensionAnnualStatement` - Pension statements - `BenefitsLetter` - Government benefits letters - `HMPPSLetter` - Probation service letters - `NHSLetter` - NHS correspondence - `BankStatement` - Bank account statements - `CreditCardStatement` - Credit card statements - `MortgageStatement` - Mortgage statements - `UtilityBill` - Gas, electricity, water bills - `MobilePhoneBill` - Mobile phone bills  **Validations performed:** - `required_fields_extracted` - Key identity fields were successfully extracted. These are: `first_name`, `last_name`, `first_line_of_address` and `postcode` - `category_match` - Document matches the specified sub_type - `document_age_valid` - Document is within acceptable age range (only if `minimum_document_length` provided) - `document_complete_and_legible` - Document is complete and readable - `tampering_signals_check` - No signs of document tampering detected  Sandbox testing: In sandbox mode, the endpoint returns a mock \"pass\" response with sandbox values. No actual document processing occurs.  > **Request behaviour:** This is a synchronous endpoint. Processing typically takes 5-15 seconds > depending on document complexity.  > This endpoint supports sandbox mode. [See how sandbox mode works](https://help.vouchsafe.id/en/articles/11979598-how-does-sandbox-mode-work).
     */
    async verifySupportingDocumentRaw(requestParameters: VerifySupportingDocumentRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<SupportingDocumentVerificationResponse>> {
        if (requestParameters['document'] == null) {
            throw new runtime.RequiredError(
                'document',
                'Required parameter "document" was null or undefined when calling verifySupportingDocument().'
            );
        }

        if (requestParameters['subType'] == null) {
            throw new runtime.RequiredError(
                'subType',
                'Required parameter "subType" was null or undefined when calling verifySupportingDocument().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("bearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }
        const consumes: runtime.Consume[] = [
            { contentType: 'multipart/form-data' },
        ];
        // @ts-ignore: canConsumeForm may be unused
        const canConsumeForm = runtime.canConsumeForm(consumes);

        let formParams: { append(param: string, value: any): any };
        let useForm = false;
        // use FormData to transmit files using content-type "multipart/form-data"
        useForm = canConsumeForm;
        if (useForm) {
            formParams = new FormData();
        } else {
            formParams = new URLSearchParams();
        }

        if (requestParameters['document'] != null) {
            formParams.append('document', requestParameters['document'] as any);
        }

        if (requestParameters['subType'] != null) {
            formParams.append('sub_type', requestParameters['subType'] as any);
        }

        if (requestParameters['minimumDocumentLength'] != null) {
            formParams.append('minimum_document_length', requestParameters['minimumDocumentLength'] as any);
        }


        let urlPath = `/verify/supporting-documents`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: formParams,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => SupportingDocumentVerificationResponseFromJSON(jsonValue));
    }

    /**
     * <div style=\"background-color: #ffebee; border-left: 4px solid #c62828; padding: 12px 16px; margin: 10px 0;\"> <strong style=\"color: #c62828;\">Experimental (beta):</strong> This feature is new and currently in beta. </div>  Extract and validate a supporting document.  This endpoint accepts a document file (PDF, JPG, or PNG) and extracts personal identity information and address details.  **Request format:** This endpoint accepts `multipart/form-data` with: - `document` - The document file (PDF, JPG, or PNG, max 10MB) - `sub_type` (required) - The type of document (e.g., `BankStatement`, `UtilityBill`). See \"Supported document types\" below. - `minimum_document_length` (optional) - Minimum document age in months. Documents older than this will fail the `document_age_valid` check.  **Supported document types (`sub_type`):** - `Payslip` - Employment payslips - `PensionAnnualStatement` - Pension statements - `BenefitsLetter` - Government benefits letters - `HMPPSLetter` - Probation service letters - `NHSLetter` - NHS correspondence - `BankStatement` - Bank account statements - `CreditCardStatement` - Credit card statements - `MortgageStatement` - Mortgage statements - `UtilityBill` - Gas, electricity, water bills - `MobilePhoneBill` - Mobile phone bills  **Validations performed:** - `required_fields_extracted` - Key identity fields were successfully extracted. These are: `first_name`, `last_name`, `first_line_of_address` and `postcode` - `category_match` - Document matches the specified sub_type - `document_age_valid` - Document is within acceptable age range (only if `minimum_document_length` provided) - `document_complete_and_legible` - Document is complete and readable - `tampering_signals_check` - No signs of document tampering detected  Sandbox testing: In sandbox mode, the endpoint returns a mock \"pass\" response with sandbox values. No actual document processing occurs.  > **Request behaviour:** This is a synchronous endpoint. Processing typically takes 5-15 seconds > depending on document complexity.  > This endpoint supports sandbox mode. [See how sandbox mode works](https://help.vouchsafe.id/en/articles/11979598-how-does-sandbox-mode-work).
     */
    async verifySupportingDocument(requestParameters: VerifySupportingDocumentRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<SupportingDocumentVerificationResponse> {
        const response = await this.verifySupportingDocumentRaw(requestParameters, initOverrides);
        return await response.value();
    }

}
